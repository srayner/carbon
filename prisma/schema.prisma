generator client {
  provider = "prisma-client-js"
  output   = "../lib/generated/prisma"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Page {
  id                 String   @id @default(cuid())
  title              String
  slug               String   @unique
  blocks             Block[]   @relation("PageBlocks")
  meta               PageMeta?
  publishedAt        DateTime?
  createdAt          DateTime @default(now())
  updatedAt          DateTime @updatedAt
}

model PageMeta {
  id                 String   @id @default(cuid())
  pageId             String   @unique
  page               Page     @relation(fields: [pageId], references: [id])
  metaTitle          String?  @db.VarChar(160)
  metaDescription    String?  @db.VarChar(300)
  metaKeywords       String?  @db.VarChar(500)
  canonicalPath      String?  
  ogTitle            String?  @db.VarChar(160)
  ogDescription      String?  @db.VarChar(300)
  ogImage            String?  
  twitterTitle       String?  @db.VarChar(160)
  twitterDescription String? @db.VarChar(300)
  twitterImage       String?
  robots             String?
}

model Block {
  id                 String    @id
  page               Page      @relation("PageBlocks", fields: [pageId], references: [id])
  pageId             String
  type               String
  properties         Json
  parentId           String?
  order              Int
  createdAt          DateTime  @default(now())
  updatedAt          DateTime  @updatedAt
}